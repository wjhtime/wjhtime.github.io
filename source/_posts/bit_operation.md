---
title: 位运算
date: 2018-02-03
categories: 算法
tags: 算法
---

### 基础语法

| 符号 | 描述 | 规则                                                         |
| ---- | ---- | ------------------------------------------------------------ |
| &    | 与   | 两位都是1时，结果为1                                         |
| 丨  | 或   | 两位有一个为1时，结果为1，否则为0                            |
| ^    | 异或 | 两位相同时为0，不同时为1                                     |
| ~    | 取反 | 0变1，1变0                                                   |
| <<   | 左移 | 二进制全部位向左移动若干位，高位丢弃，低位补0                |
| >>   | 右移 | 二进制全部位向右移动若干位，高位补0（无符号），有符号数，算数右移补符号位，逻辑右移不补符号位 |


### 常用算法
#### 判断是否是奇数

```php
$num = mt_rand(1, 1000);
if ($num & 1){
    echo '奇数:' . $num
}

因为1的二进制为 000001，最后一位是1，两位相与，奇数会返回1，偶数会返回0
```

#### 交换两数
```php
function swap(&$a, &$b){
    $a ^= $b;
    $b ^= $a;
    $a ^= $b;
}

使用异或操作
第一步：$a = $a ^ $b
第二步：$b = $a ^ $b ^ $b
第三步：$a = $a ^ $b ^ $b ^ $a


两个结论
1. 相同的数进行异或操作结果为0
2. 任何数和0进行异或操作结果都为本身
```

#### 变换符号
```php
$a = 100;
~$a + 1

取$a的相反数，正负号进行转换
```

#### 计算绝对值
```php
$a = -100;
//把31位全部移动，正数只会是0，负数会把最高位的1补齐，所以是-1
$i = $a >> 31;
return $i == 0 ? $a : ~$a + 1
将a右移31位，如果是正数，结果为0，负数结果为-1

另一种方法：
$a = -100;
$i = $a >> 31;
return ($a ^ $i) - $i;
```


